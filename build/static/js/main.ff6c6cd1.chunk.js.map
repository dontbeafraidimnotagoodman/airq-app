{"version":3,"sources":["components/Form.js","components/AQ.js","components/Title.js","components/Airqplot.js","App.js","serviceWorker.js","index.js"],"names":["Form","state","startDate","Date","date","this","setState","props","handleDayChange","react_default","a","createElement","onSubmit","getAirQ","className","id","type","name","value","es","dateFormat","selected","onChange","handleChange","bind","todayButton","placeholderText","React","Component","AQ","city","so2","pm10","o3","no2","co","pm25","error","localtime","Title","Airqplot","_this","Object","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","width","height","updateWindowDimensions","assertThisInitialized","window","addEventListener","removeEventListener","innerWidth","innerHeight","react_plotly_default","data","x","pltdata_time","y","pltdata_co","color","layout","xaxis","autorange","title","pltdata_so2","pltdata_pm10","pltdata_no2","pltdata_o3","pltdata_pm25","App","undefined","location","test_time","moment","startOf","format","test_time_from","_callee","e","this_city","this_country","api_call","another_call","pltdata","d","i","regenerator_default","wrap","_context","prev","next","preventDefault","target","elements","console","log","fetch","concat","sent","json","statusCode","meta","found","results","length","parameter","push","reverse","local","stop","day","true_day","week_ago","subtract","src_components_Title","src_components_Form","src_components_AQ","components_Airqplot","Boolean","hostname","match","ReactDOM","render","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.ff6c6cd1.chunk.js","sourcesContent":["import React from 'react';\nimport './Form.css';\nimport DatePicker from \"react-datepicker\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nclass Form extends React.Component{\n    state={\n        startDate:new Date(),\n    };\n    handleChange(date){\n        this.setState({\n            startDate: date\n        });\n        this.props.handleDayChange(date);\n    }\n    render(){\n        return(\n            <div>\n                <form onSubmit={this.props.getAirQ}>\n                    <div className=\"input-Form\">\n                    <div>\n                    </div>\n                        <div id=\"inner-form\">\n                            <div></div>\n                            <div> \n                                <select type=\"text\" name=\"location\">\n                                    <option value=\"东湖梨园\">东湖梨园</option>\n                                    <option value=\"吴家山\">吴家山</option>\n                                    <option value=\"武昌紫阳\">武昌紫阳</option>\n                                    <option value=\"民族大道182号\">民族大道182号</option>\n                                    <option value=\"汉口江滩\">汉口江滩</option>\n                                    <option value=\"汉口花桥\">汉口花桥</option>\n                                    <option value=\"汉阳月湖\">汉阳月湖</option>\n                                    <option value=\"沉湖七壕\">沉湖七壕</option>\n                                    <option value=\"沌口新区\">沌口新区</option>\n                                    <option value=\"青山钢花\">青山钢花</option>\n                                </select>\n                                <DatePicker \n                                            dateFormat=\"yyyy/MM/dd\"        \n                                            selected={this.state.startDate}\n                                            onChange={this.handleChange.bind(this)}\n                                            todayButton={\"today\"}\n                                            placeholderText={\"2019/01/01\"}\n                                            className=\"picker\"\n                                    />\n                                <button>Get Air Quality</button>\n                            </div>\n                            <div></div> \n                        </div>\n                        <div></div>\n                    </div>\n                </form>\n            </div>\n        )\n    }\n}\n  \n\n\nexport default Form;","import React from 'react';\nimport './AQ.css';\n\nclass AQ extends React.Component{\n    render(){\n        return(\n            <div className=\"AQ\">\n                <div></div>\n                <div>\n                    {this.props.city && <p>city:{this.props.city}</p>}\n                    {this.props.so2 && <p>so2:{this.props.so2} µg/m³</p>}\n                    {this.props.pm10 && <p>PM 10:{this.props.pm10} µg/m³</p>}\n                    {this.props.o3 && <p>O3:{this.props.o3} µg/m³</p>}\n                    {this.props.no2 && <p>NO2:{this.props.no2} µg/m³</p>}\n                    {this.props.co && <p>CO:{this.props.co} µg/m³</p>}\n                    {this.props.pm25 && <p>PM2.5:{this.props.pm25} µg/m³</p>}\n                    {this.props.error && <p>error:{this.props.error}</p>}\n                    {this.props.localtime && <p>Local Time:{this.props.localtime}</p>}\n                </div>\n                <div></div>\n            </div>\n        )\n    }\n}\n\nexport default AQ;","import React from 'react';\nimport './Title.css';\n\nclass Title extends React.Component{\n    render(){\n        return(\n            <div className=\"Title\">\n                Air Quality in Wuhan\n            </div>\n        )\n    }\n}\n\nexport default Title;","import React from 'react';\nimport Plot from 'react-plotly.js';\n\n\nclass Airqplot extends React.Component{\n    constructor(props) {\n    super(props);\n    this.state = { width: 0, height: 0 };\n    this.updateWindowDimensions = this.updateWindowDimensions.bind(this);\n    }\n    \n    componentDidMount() {\n    this.updateWindowDimensions();\n    window.addEventListener('resize', this.updateWindowDimensions);\n    }\n    \n    componentWillUnmount() {\n    window.removeEventListener('resize', this.updateWindowDimensions);\n    }\n    \n    updateWindowDimensions() {\n    this.setState({ width: window.innerWidth, height: window.innerHeight });\n    }\n    render(){\n        return(\n            <div className='airqplot'>\n                <div  className='aiqplot-1'>\n                    <Plot data={[{x:this.props.pltdata_time, \n                        y:this.props.pltdata_co,\n                        type: 'scatter',\n                        color:'orange',\n                        name:'co',}]} \n                        layout={{xaxis:{autorange:'reversed'},width: this.state.width,title:'CO in the past week'}}\n                        />\n                </div>\n                <div className='airqplot-2'>\n                    <Plot data={[{x:this.props.pltdata_time, \n                    y:this.props.pltdata_so2,\n                    type: 'scatter',\n                    color:'red',\n                    name:'so2',\n                    },\n                    {\n                        x:this.props.pltdata_time, \n                        y:this.props.pltdata_pm10,\n                        type: 'scatter',\n                        color:'blue',\n                        name:'pm10',\n\n                    },{\n                        x:this.props.pltdata_time, \n                        y:this.props.pltdata_no2,\n                        type: 'scatter',\n                        color:'black',\n                        name:'no2',\n\n                    },{\n                        x:this.props.pltdata_time, \n                        y:this.props.pltdata_o3,\n                        type: 'scatter',\n                        color:'green',\n                        name:'o3',\n\n                    },{\n                        x:this.props.pltdata_time, \n                        y:this.props.pltdata_pm25,\n                        type: 'scatter',\n                        color:'purple',\n                        name:'pm25',\n\n                    }]}\n                    layout={{xaxis:{autorange:'reversed'},width: this.state.width,title:'Airquality in the past week for the chosen date'}}\n                    />\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Airqplot;","import React from 'react';\nimport './App.css';\nimport Form from './components/Form';\nimport AQ from './components/AQ';\nimport Title from './components/Title';\nimport Airqplot from './components/Airqplot';\nimport moment from 'moment';\n\n\n\nclass App extends React.Component {\n  state={\n    city:undefined,\n    location:undefined,\n    so2:undefined,\n    pm10:undefined,\n    o3:undefined,\n    no2:undefined,\n    co:undefined,\n    pm25:undefined,\n    error:undefined,\n    localtime:undefined,\n    test_time:moment(new Date(),'YYYY/MM/DD',false).startOf('day').format('YYYY-MM-DD'),\n    test_time_from:moment(new Date(),'YYYY/MM/DD',false).startOf('day').format('YYYY-MM-DD'),\n\n    pltdata_so2:undefined,\n    pltdata_pm10:undefined,\n    pltdata_o3:undefined,\n    pltdata_co:undefined,\n    pltdata_no2:undefined,\n    pltdata_pm25:undefined,\n    pltdata_time:undefined,\n  }\n  \n  handleDayChange(day){\n    const true_day=moment(day,'YYYY/MM/DD',false).startOf('day').format('YYYY-MM-DD');\n    let week_ago=moment(true_day).subtract(7, 'days');\n    week_ago=moment(week_ago,'YYYY/MM/DD',false).startOf('day').format('YYYY-MM-DD');\n    this.setState({\n      test_time:true_day,\n      test_time_from:week_ago,\n    });\n  }\n  getAirQ = async(e)=>{\n    e.preventDefault();\n    const this_city=\"武汉市\";\n    const this_country=\"CN\";\n    const location=e.target.elements.location.value;\n    console.log(this.state.test_time);\n    const api_call=await fetch(`https://api.openaq.org/v1/measurements?city=${this_city}&country=${this_country}&location=${location}&date_from=${this.state.test_time}&date_to=${this.state.test_time}`);\n    const data=await api_call.json();\n\n    const another_call=await fetch(`https://api.openaq.org/v1/measurements?city=${this_city}&country=${this_country}&location=${location}&date_from=${this.state.test_time_from}&date_to=${this.state.test_time}&limit=1000`);\n    const pltdata=await another_call.json();\n    \n    let pltdata_so2=[];\n    let pltdata_pm10=[];\n    let pltdata_o3=[];\n    let pltdata_no2=[];\n    let pltdata_co=[];\n    let pltdata_pm25=[];\n    let pltdata_time=[];\n    \n     /* pltdata_so2.push(pltdata[so2]);\n      pltdata_o3.push(pltdata[o3]);\n      pltdata_pm10.push(pltdata[pm10]);\n      pltdata_no2.push(pltdata[no2]);\n      pltdata_co.push(pltdata[co]);\n      pltdata_pm25.push(pltdata[pm25]);\n    });\n    */\n    console.log(pltdata_time);\n    console.log(pltdata);\n    console.log(data);\n    if (data.statusCode==='404' || data.meta.found=== 0){\n      this.setState({\n        city:undefined,\n        location:undefined,\n        so2:undefined,\n        pm10:undefined,\n        o3:undefined,\n        no2:undefined,\n        co:undefined,\n        pm25:undefined,\n        error:\"Bad Request, please check time and location\",\n        localtime:undefined\n      });\n    }else{\n      let d=0;\n      for (let i=pltdata.results.length-1;i>=0;i--){\n        if (pltdata.results[i].parameter==='so2'){\n          pltdata_so2.push(pltdata.results[i].value)\n        }else if(pltdata.results[i].parameter==='pm10'){\n          pltdata_pm10.push(pltdata.results[i].value)\n        }else if(pltdata.results[i].parameter==='o3'){\n          pltdata_o3.push(pltdata.results[i].value)\n        }else if(pltdata.results[i].parameter==='no2'){\n          pltdata_no2.push(pltdata.results[i].value)\n        }else if(pltdata.results[i].parameter==='co'){\n          pltdata_co.push(pltdata.results[i].value)\n        }else if(pltdata.results[i].parameter==='pm25'){\n          pltdata_pm25.push(pltdata.results[i].value);\n          pltdata_time.push(d);\n          d++;\n        }\n      }\n      pltdata_time.reverse();\n      this.setState({\n        city:data.results[0].city,\n        location:data.results[0].location,\n        so2:data.results[0].value,\n        pm10:data.results[1].value,\n        o3:data.results[2].value,\n        no2:data.results[3].value,\n        co:data.results[4].value,\n        pm25:data.results[5].value,\n        error:undefined,\n        localtime:data.results[0].local,\n        pltdata_so2:pltdata_so2,\n        pltdata_pm10:pltdata_pm10,\n        pltdata_o3:pltdata_o3,\n        pltdata_co:pltdata_co,\n        pltdata_no2:pltdata_no2,\n        pltdata_pm25:pltdata_pm25,\n        pltdata_time:pltdata_time,\n      });\n    }\n  }\n  render() {\n    return (\n      <div>\n          <div>\n          <Title />\n          <Form getAirQ={this.getAirQ} handleDayChange={this.handleDayChange.bind(this)}/>\n          <div className=\"airq-display\">\n            <div className=\"text-dis\">\n              <AQ city={this.state.city}\n                location={this.state.location}\n                so2={this.state.so2}\n                pm10={this.state.pm10}\n                o3={this.state.o3}\n                no2={this.state.no2}\n                co={this.state.co}\n                pm25={this.state.pm25}\n                error={this.state.error}\n                localtime={this.state.localtime}/>\n            </div>\n            <div className=\"img-dis\"></div>\n          </div>\n          </div>\n          <div className=\"plot-display\">\n            <Airqplot pltdata_so2={this.state.pltdata_so2} \n            pltdata_pm10={this.state.pltdata_pm10}\n            pltdata_co={this.state.pltdata_co}\n            pltdata_no2={this.state.pltdata_no2}\n            pltdata_o3={this.state.pltdata_o3}\n            pltdata_pm25={this.state.pltdata_pm25}\n            pltdata_time={this.state.pltdata_time}/>\n          </div>\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}