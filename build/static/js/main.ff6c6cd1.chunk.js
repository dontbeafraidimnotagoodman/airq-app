(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(t,e,a){t.exports=a(47)},30:function(t,e,a){},33:function(t,e,a){},34:function(t,e,a){},42:function(t,e,a){},43:function(t,e,a){},47:function(t,e,a){"use strict";a.r(e);var n=a(1),o=a.n(n),s=a(13),i=a.n(s),r=(a(30),a(16)),l=a.n(r),c=a(20),p=a(4),m=a(5),u=a(7),d=a(6),h=a(8),v=(a(33),a(34),a(24)),y=(a(41),function(t){function e(){var t,a;Object(p.a)(this,e);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(u.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(o)))).state={startDate:new Date},a}return Object(h.a)(e,t),Object(m.a)(e,[{key:"handleChange",value:function(t){this.setState({startDate:t}),this.props.handleDayChange(t)}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("form",{onSubmit:this.props.getAirQ},o.a.createElement("div",{className:"input-Form"},o.a.createElement("div",null),o.a.createElement("div",{id:"inner-form"},o.a.createElement("div",null),o.a.createElement("div",null,o.a.createElement("select",{type:"text",name:"location"},o.a.createElement("option",{value:"\u4e1c\u6e56\u68a8\u56ed"},"\u4e1c\u6e56\u68a8\u56ed"),o.a.createElement("option",{value:"\u5434\u5bb6\u5c71"},"\u5434\u5bb6\u5c71"),o.a.createElement("option",{value:"\u6b66\u660c\u7d2b\u9633"},"\u6b66\u660c\u7d2b\u9633"),o.a.createElement("option",{value:"\u6c11\u65cf\u5927\u9053182\u53f7"},"\u6c11\u65cf\u5927\u9053182\u53f7"),o.a.createElement("option",{value:"\u6c49\u53e3\u6c5f\u6ee9"},"\u6c49\u53e3\u6c5f\u6ee9"),o.a.createElement("option",{value:"\u6c49\u53e3\u82b1\u6865"},"\u6c49\u53e3\u82b1\u6865"),o.a.createElement("option",{value:"\u6c49\u9633\u6708\u6e56"},"\u6c49\u9633\u6708\u6e56"),o.a.createElement("option",{value:"\u6c89\u6e56\u4e03\u58d5"},"\u6c89\u6e56\u4e03\u58d5"),o.a.createElement("option",{value:"\u6c8c\u53e3\u65b0\u533a"},"\u6c8c\u53e3\u65b0\u533a"),o.a.createElement("option",{value:"\u9752\u5c71\u94a2\u82b1"},"\u9752\u5c71\u94a2\u82b1")),o.a.createElement(v.a,{dateFormat:"yyyy/MM/dd",selected:this.state.startDate,onChange:this.handleChange.bind(this),todayButton:"today",placeholderText:"2019/01/01",className:"picker"}),o.a.createElement("button",null,"Get Air Quality")),o.a.createElement("div",null)),o.a.createElement("div",null))))}}]),e}(o.a.Component)),f=(a(42),function(t){function e(){return Object(p.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"AQ"},o.a.createElement("div",null),o.a.createElement("div",null,this.props.city&&o.a.createElement("p",null,"city:",this.props.city),this.props.so2&&o.a.createElement("p",null,"so2:",this.props.so2," \xb5g/m\xb3"),this.props.pm10&&o.a.createElement("p",null,"PM 10:",this.props.pm10," \xb5g/m\xb3"),this.props.o3&&o.a.createElement("p",null,"O3:",this.props.o3," \xb5g/m\xb3"),this.props.no2&&o.a.createElement("p",null,"NO2:",this.props.no2," \xb5g/m\xb3"),this.props.co&&o.a.createElement("p",null,"CO:",this.props.co," \xb5g/m\xb3"),this.props.pm25&&o.a.createElement("p",null,"PM2.5:",this.props.pm25," \xb5g/m\xb3"),this.props.error&&o.a.createElement("p",null,"error:",this.props.error),this.props.localtime&&o.a.createElement("p",null,"Local Time:",this.props.localtime)),o.a.createElement("div",null))}}]),e}(o.a.Component)),_=(a(43),function(t){function e(){return Object(p.a)(this,e),Object(u.a)(this,Object(d.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(m.a)(e,[{key:"render",value:function(){return o.a.createElement("div",{className:"Title"},"Air Quality in Wuhan")}}]),e}(o.a.Component)),E=a(14),w=a(18),g=a.n(w),b=function(t){function e(t){var a;return Object(p.a)(this,e),(a=Object(u.a)(this,Object(d.a)(e).call(this,t))).state={width:0,height:0},a.updateWindowDimensions=a.updateWindowDimensions.bind(Object(E.a)(Object(E.a)(a))),a}return Object(h.a)(e,t),Object(m.a)(e,[{key:"componentDidMount",value:function(){this.updateWindowDimensions(),window.addEventListener("resize",this.updateWindowDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateWindowDimensions)}},{key:"updateWindowDimensions",value:function(){this.setState({width:window.innerWidth,height:window.innerHeight})}},{key:"render",value:function(){return o.a.createElement("div",{className:"airqplot"},o.a.createElement("div",{className:"aiqplot-1"},o.a.createElement(g.a,{data:[{x:this.props.pltdata_time,y:this.props.pltdata_co,type:"scatter",color:"orange",name:"co"}],layout:{xaxis:{autorange:"reversed"},width:this.state.width,title:"CO in the past week"}})),o.a.createElement("div",{className:"airqplot-2"},o.a.createElement(g.a,{data:[{x:this.props.pltdata_time,y:this.props.pltdata_so2,type:"scatter",color:"red",name:"so2"},{x:this.props.pltdata_time,y:this.props.pltdata_pm10,type:"scatter",color:"blue",name:"pm10"},{x:this.props.pltdata_time,y:this.props.pltdata_no2,type:"scatter",color:"black",name:"no2"},{x:this.props.pltdata_time,y:this.props.pltdata_o3,type:"scatter",color:"green",name:"o3"},{x:this.props.pltdata_time,y:this.props.pltdata_pm25,type:"scatter",color:"purple",name:"pm25"}],layout:{xaxis:{autorange:"reversed"},width:this.state.width,title:"Airquality in the past week for the chosen date"}})))}}]),e}(o.a.Component),O=a(12),D=a.n(O),Y=function(t){function e(){var t,a;Object(p.a)(this,e);for(var n=arguments.length,o=new Array(n),s=0;s<n;s++)o[s]=arguments[s];return(a=Object(u.a)(this,(t=Object(d.a)(e)).call.apply(t,[this].concat(o)))).state={city:void 0,location:void 0,so2:void 0,pm10:void 0,o3:void 0,no2:void 0,co:void 0,pm25:void 0,error:void 0,localtime:void 0,test_time:D()(new Date,"YYYY/MM/DD",!1).startOf("day").format("YYYY-MM-DD"),test_time_from:D()(new Date,"YYYY/MM/DD",!1).startOf("day").format("YYYY-MM-DD"),pltdata_so2:void 0,pltdata_pm10:void 0,pltdata_o3:void 0,pltdata_co:void 0,pltdata_no2:void 0,pltdata_pm25:void 0,pltdata_time:void 0},a.getAirQ=function(){var t=Object(c.a)(l.a.mark(function t(e){var n,o,s,i,r,c,p,m,u,d,h,v,y,f,_,E;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),n="\u6b66\u6c49\u5e02",o="CN",s=e.target.elements.location.value,console.log(a.state.test_time),t.next=7,fetch("https://api.openaq.org/v1/measurements?city=".concat(n,"&country=").concat(o,"&location=").concat(s,"&date_from=").concat(a.state.test_time,"&date_to=").concat(a.state.test_time));case 7:return i=t.sent,t.next=10,i.json();case 10:return r=t.sent,t.next=13,fetch("https://api.openaq.org/v1/measurements?city=".concat(n,"&country=").concat(o,"&location=").concat(s,"&date_from=").concat(a.state.test_time_from,"&date_to=").concat(a.state.test_time,"&limit=1000"));case 13:return c=t.sent,t.next=16,c.json();case 16:if(p=t.sent,m=[],u=[],d=[],h=[],v=[],y=[],f=[],console.log(f),console.log(p),console.log(r),"404"===r.statusCode||0===r.meta.found)a.setState({city:void 0,location:void 0,so2:void 0,pm10:void 0,o3:void 0,no2:void 0,co:void 0,pm25:void 0,error:"Bad Request, please check time and location",localtime:void 0});else{for(_=0,E=p.results.length-1;E>=0;E--)"so2"===p.results[E].parameter?m.push(p.results[E].value):"pm10"===p.results[E].parameter?u.push(p.results[E].value):"o3"===p.results[E].parameter?d.push(p.results[E].value):"no2"===p.results[E].parameter?h.push(p.results[E].value):"co"===p.results[E].parameter?v.push(p.results[E].value):"pm25"===p.results[E].parameter&&(y.push(p.results[E].value),f.push(_),_++);f.reverse(),a.setState({city:r.results[0].city,location:r.results[0].location,so2:r.results[0].value,pm10:r.results[1].value,o3:r.results[2].value,no2:r.results[3].value,co:r.results[4].value,pm25:r.results[5].value,error:void 0,localtime:r.results[0].local,pltdata_so2:m,pltdata_pm10:u,pltdata_o3:d,pltdata_co:v,pltdata_no2:h,pltdata_pm25:y,pltdata_time:f})}case 28:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),a}return Object(h.a)(e,t),Object(m.a)(e,[{key:"handleDayChange",value:function(t){var e=D()(t,"YYYY/MM/DD",!1).startOf("day").format("YYYY-MM-DD"),a=D()(e).subtract(7,"days");a=D()(a,"YYYY/MM/DD",!1).startOf("day").format("YYYY-MM-DD"),this.setState({test_time:e,test_time_from:a})}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(_,null),o.a.createElement(y,{getAirQ:this.getAirQ,handleDayChange:this.handleDayChange.bind(this)}),o.a.createElement("div",{className:"airq-display"},o.a.createElement("div",{className:"text-dis"},o.a.createElement(f,{city:this.state.city,location:this.state.location,so2:this.state.so2,pm10:this.state.pm10,o3:this.state.o3,no2:this.state.no2,co:this.state.co,pm25:this.state.pm25,error:this.state.error,localtime:this.state.localtime})),o.a.createElement("div",{className:"img-dis"}))),o.a.createElement("div",{className:"plot-display"},o.a.createElement(b,{pltdata_so2:this.state.pltdata_so2,pltdata_pm10:this.state.pltdata_pm10,pltdata_co:this.state.pltdata_co,pltdata_no2:this.state.pltdata_no2,pltdata_o3:this.state.pltdata_o3,pltdata_pm25:this.state.pltdata_pm25,pltdata_time:this.state.pltdata_time})))}}]),e}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.ff6c6cd1.chunk.js.map